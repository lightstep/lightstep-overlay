{"version":3,"sources":["webpack:///lightstep-overlay.min.js","webpack:///webpack/bootstrap 6433b89b1cc6ef48f294","webpack:///./src/overlay.js","webpack:///external \"Tracer\""],"names":["LightStepOverlay","modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","initialize","tracer","tracerImp","imp","on","report","spans","span_records","length","link","opts","options","kMaxSpans","totalLinks","url","collector_port","window","location","hostname","port","access_token","host","collector_host","match","replace","overlay","document","getElementById","HOST_DIV_ID","container","createElement","href","runtime_guid","style","position","bottom","right","width","height","borderRadius","cursor","background","boxShadow","transition","transform","opacity","btn","display","text","top","left","lineHeight","fontFamily","color","innerHTML","close","borderLeft","fontSize","textAlign","logo","src","onmouseenter","e","onmouseleave","onclick","preventDefault","stopPropagation","appendChild","title","body","getComputedStyle","i","childNodes","child","className","joinedSpans","_i","push","summary","span_name","oldest_micros","youngest_micros","span_guid","_i2","j","slice","_i3","Object","defineProperty","value","_opentracing","_opentracing2","Tracer"],"mappings":"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","file":"lightstep-overlay.min.js","sourcesContent":["var LightStepOverlay =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = initialize;\n\t\n\tvar _opentracing = __webpack_require__(1);\n\t\n\tvar _opentracing2 = _interopRequireDefault(_opentracing);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar HOST_DIV_ID = 'lightstep_overlay';\n\t\n\tfunction initialize(tracer) {\n\t    if (!tracer) {\n\t        return;\n\t    }\n\t    var tracerImp = tracer.imp();\n\t    if (!tracerImp) {\n\t        return;\n\t    }\n\t\n\t    tracerImp.on('report', function (report) {\n\t        var spans = report.span_records;\n\t        if (!spans || spans.length === 0) {\n\t            return;\n\t        }\n\t\n\t        var link = void 0;\n\t        var opts = tracerImp.options();\n\t        var kMaxSpans = 4;\n\t        var totalLinks = 0;\n\t\n\t        // Make a guess about whether we are reporting to a dev instance or not\n\t        // based on the ports being used.\n\t        var url = void 0;\n\t        if (opts.collector_port >= 9997 && opts.collector_port <= 9998) {\n\t            url = 'http://' + window.location.hostname + ':' + window.location.port + '/' + opts.access_token + '/';\n\t        } else {\n\t            var host = opts.collector_host;\n\t            if (host.match(/^collector[.-]/)) {\n\t                host = host.replace(/^collector([.-])/, 'app$1');\n\t            }\n\t            url = 'https://' + host + '/' + opts.access_token + '/';\n\t        }\n\t\n\t        // Check if the element is there, as some in-page script might have\n\t        // cleared the BODY, etc.\n\t        var overlay = document.getElementById(HOST_DIV_ID);\n\t        if (!overlay) {\n\t            (function () {\n\t                var container = document.createElement('a');\n\t                container.href = url + 'latest?q=tracer.guid:' + spans[0].runtime_guid;\n\t                container.style.position = 'fixed';\n\t                container.style.bottom = '2em';\n\t                container.style.right = '2em';\n\t                container.style.width = '3em';\n\t                container.style.height = '3em';\n\t                container.style.borderRadius = '3em';\n\t                container.style.cursor = 'pointer';\n\t                container.style.background = 'rgb(0, 163, 255)';\n\t                container.style.boxShadow = '0 0 0 1px #c4c4c4, 0 2px 20px 0 #e2e2e2';\n\t                container.style.transition = '.25s all cubic-bezier(.38,-0.19,.62,1.23)';\n\t                container.style.transform = 'scale(0)';\n\t                container.style.opacity = '0';\n\t\n\t                var btn = document.createElement('div');\n\t                btn.style.width = '100%';\n\t                btn.style.height = '100%';\n\t                btn.style.display = 'block';\n\t                btn.style.borderRadius = '3em';\n\t                btn.style.background = 'linear-gradient(to bottom right,#00d6ff,#3b6fcb 90%)';\n\t                btn.style.opacity = '0';\n\t                btn.style.boxShadow = '0 0 0 0 transparent';\n\t                btn.style.transition = '.2s all';\n\t\n\t                var text = document.createElement('p');\n\t                text.style.position = 'absolute';\n\t                text.style.top = '0';\n\t                text.style.left = '3.25em';\n\t                text.style.lineHeight = '3em';\n\t                text.style.fontFamily = '\"HelveticaNeue-Light\", \"Helvetica Neue Light\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif'; // eslint-disable-line\n\t                text.style.color = '#FFF';\n\t                text.style.opacity = '0';\n\t                text.innerHTML = 'View traces';\n\t                text.style.transition = '.2s all';\n\t\n\t                var close = document.createElement('p');\n\t                close.style.position = 'absolute';\n\t                close.style.top = '0';\n\t                close.style.right = '0';\n\t                close.style.width = '2em';\n\t                close.style.borderRadius = '0 3rem 3rem 0';\n\t                close.style.borderLeft = '1px solid rgba(0,0,0,.15)';\n\t                close.style.boxShadow = 'inset 1px 0 0 0 rgba(255,255,255,.2)';\n\t                close.style.lineHeight = '3rem';\n\t                close.style.color = '#FFF';\n\t                close.style.opacity = '0';\n\t                close.style.fontSize = '1.5rem';\n\t                close.style.textAlign = 'center';\n\t                close.innerHTML = '×';\n\t                close.style.transition = '.2s all';\n\t\n\t                var logo = document.createElement('img');\n\t                logo.src = 'http://imgur.com/brQx4rK.png';\n\t                logo.style.width = '2em';\n\t                logo.style.position = 'absolute';\n\t                logo.style.top = '.925em';\n\t                logo.style.left = '.5em';\n\t\n\t                container.onmouseenter = function (e) {\n\t                    btn.style.background = 'linear-gradient(to bottom right,#00d6ff,#3b6fcb 90%)';\n\t                    btn.style.opacity = '1';\n\t                    container.style.boxShadow = 'rgb(196, 196, 196) 0px 0px 0px 1px, rgb(184, 184, 184) 0px 4px 30px 0px';\n\t                    container.style.opacity = '1';\n\t                    container.style.width = '12em';\n\t                    text.style.opacity = '.9';\n\t                    close.style.opacity = '.9';\n\t                    text.style.color = 'rgba(255,255,255,.6)';\n\t                    close.style.color = 'rgba(255,255,255,.6)';\n\t                };\n\t\n\t                container.onmouseleave = function (e) {\n\t                    btn.style.boxShadow = '0 0 0 0 transparent';\n\t                    btn.style.opacity = '0';\n\t                    container.style.boxShadow = '0 0 0 1px #c4c4c4, 0 2px 20px 0 #e2e2e2';\n\t                    container.style.width = '3em';\n\t                    text.style.opacity = '0';\n\t                    close.style.opacity = '0';\n\t                };\n\t\n\t                close.onmouseenter = function (e) {\n\t                    close.style.color = 'rgba(255,255,255,.9)';\n\t                    text.style.color = 'rgba(255,255,255,.6)';\n\t                };\n\t\n\t                close.onmouseleave = function (e) {\n\t                    close.style.color = 'rgba(255,255,255,.6)';\n\t                    text.style.color = 'rgba(255,255,255,.9)';\n\t                };\n\t\n\t                close.onclick = function (e) {\n\t                    e.preventDefault();\n\t                    e.stopPropagation();\n\t                    container.style.transform = 'scale(0)';\n\t                    container.style.opacity = '0';\n\t                };\n\t\n\t                container.appendChild(btn);\n\t                container.appendChild(logo);\n\t                container.appendChild(text);\n\t                container.appendChild(close);\n\t\n\t                overlay = document.createElement('div');\n\t                overlay.id = HOST_DIV_ID;\n\t                link = document.createElement('a');\n\t                link.href = url;\n\t                var title = document.createElement('div');\n\t                title.appendChild(link);\n\t                overlay.appendChild(title);\n\t\n\t                document.body.appendChild(overlay);\n\t                document.body.appendChild(container);\n\t\n\t                // Once all that stuff is done\n\t                // Note the getComputedStyle() call is necessary to force the DOM\n\t                // to update the element so the animation looks correct\n\t                container.style.opacity = '0';\n\t                window.getComputedStyle(container).opacity; // eslint-disable-line no-unused-expressions\n\t\n\t                container.style.transform = 'scale(1)';\n\t                container.style.opacity = '1';\n\t            })();\n\t        }\n\t\n\t        for (var i = 0; i < overlay.childNodes.length; i++) {\n\t            var child = overlay.childNodes[i];\n\t            if (child.className === 'lightstep_span') {\n\t                totalLinks++;\n\t            }\n\t        }\n\t        // If we've already added kMaxSpans+1 lines below the\n\t        // 'header', then don't add anything else.\n\t        if (totalLinks > kMaxSpans) {\n\t            return;\n\t        }\n\t\n\t        // Do a primitive trace joining here: only show one link per\n\t        // trace (i.e. one link per set of spans that will be\n\t        // combined). We make the (possibly not true) assumptions that\n\t        // all spans in a trace will arrive in the same event and that\n\t        // all span share a join id (just to keep things simple).\n\t        var joinedSpans = [];\n\t        for (var _i = 0; _i < spans.length; _i++) {\n\t            joinedSpans.push({\n\t                summary: spans[_i].span_name,\n\t                oldest_micros: spans[_i].oldest_micros,\n\t                youngest_micros: spans[_i].youngest_micros,\n\t                span_guid: spans[_i].span_guid\n\t            });\n\t        }\n\t        for (var _i2 = 0; _i2 < joinedSpans.length; _i2++) {\n\t            for (var j = _i2 + 1; j < joinedSpans.length; j++) {\n\t                if (joinedSpans[j].oldest_micros <= joinedSpans[_i2].youngest_micros && joinedSpans[j].youngest_micros >= joinedSpans[_i2].oldest_micros) {\n\t                    if (joinedSpans[j].oldest_micros < joinedSpans[_i2].oldest_micros) {\n\t                        joinedSpans[_i2].summary = joinedSpans[j].summary + ', ' + joinedSpans[_i2].summary;\n\t                        joinedSpans[_i2].oldest_micros = joinedSpans[j].oldest_micros;\n\t                    } else {\n\t                        joinedSpans[_i2].summary += ', ' + joinedSpans[j].summary;\n\t                    }\n\t                    if (joinedSpans[j].youngest_micros > joinedSpans[_i2].youngest_micros) {\n\t                        joinedSpans[_i2].youngest_micros = joinedSpans[j].youngest_micros;\n\t                    }\n\t                    joinedSpans[j] = joinedSpans[joinedSpans.length - 1];\n\t                    joinedSpans = joinedSpans.slice(0, joinedSpans.length - 1);\n\t                    j = _i2;\n\t                }\n\t            }\n\t        }\n\t\n\t        for (var _i3 = 0; _i3 < joinedSpans.length && totalLinks <= kMaxSpans; _i3++) {\n\t            totalLinks++;\n\t        }\n\t    });\n\t}\n\t\n\t// Try with the global Tracer automatically. It will safely do nothing if there's\n\t// no global tracer and the client can explicitly initialize the overlay.\n\t//\n\t// NOTE: this relies directly on the LightStep implementation and not on the\n\t// OpenTracing APIs\n\tinitialize(_opentracing2.default);\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\tmodule.exports = Tracer;\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** lightstep-overlay.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 6433b89b1cc6ef48f294\n **/","import Tracer from 'opentracing';\n\nconst HOST_DIV_ID = 'lightstep_overlay';\n\nexport default function initialize(tracer) {\n    if (!tracer) {\n        return;\n    }\n    const tracerImp = tracer.imp();\n    if (!tracerImp) {\n        return;\n    }\n\n    tracerImp.on('report', (report) => {\n        let spans = report.span_records;\n        if (!spans || spans.length === 0) {\n            return;\n        }\n\n        let link;\n        let opts = tracerImp.options();\n        let kMaxSpans = 4;\n        let totalLinks = 0;\n\n        // Make a guess about whether we are reporting to a dev instance or not\n        // based on the ports being used.\n        let url;\n        if (opts.collector_port >= 9997 && opts.collector_port <= 9998) {\n            url = `http://${window.location.hostname}:${window.location.port}/${opts.access_token}/`;\n        } else {\n            let host = opts.collector_host;\n            if (host.match(/^collector[.-]/)) {\n                host = host.replace(/^collector([.-])/, 'app$1');\n            }\n            url = `https://${host}/${opts.access_token}/`;\n        }\n\n        // Check if the element is there, as some in-page script might have\n        // cleared the BODY, etc.\n        let overlay = document.getElementById(HOST_DIV_ID);\n        if (!overlay) {\n            let container = document.createElement('a');\n            container.href = `${url}latest?q=tracer.guid:${spans[0].runtime_guid}`;\n            container.style.position = 'fixed';\n            container.style.bottom = '2em';\n            container.style.right = '2em';\n            container.style.width = '3em';\n            container.style.height = '3em';\n            container.style.borderRadius = '3em';\n            container.style.cursor = 'pointer';\n            container.style.background = 'rgb(0, 163, 255)';\n            container.style.boxShadow = '0 0 0 1px #c4c4c4, 0 2px 20px 0 #e2e2e2';\n            container.style.transition = '.25s all cubic-bezier(.38,-0.19,.62,1.23)';\n            container.style.transform = 'scale(0)';\n            container.style.opacity = '0';\n\n\n            let btn = document.createElement('div');\n            btn.style.width = '100%';\n            btn.style.height = '100%';\n            btn.style.display = 'block';\n            btn.style.borderRadius = '3em';\n            btn.style.background = 'linear-gradient(to bottom right,#00d6ff,#3b6fcb 90%)';\n            btn.style.opacity = '0';\n            btn.style.boxShadow = '0 0 0 0 transparent';\n            btn.style.transition = '.2s all';\n\n            let text = document.createElement('p');\n            text.style.position = 'absolute';\n            text.style.top = '0';\n            text.style.left = '3.25em';\n            text.style.lineHeight = '3em';\n            text.style.fontFamily = '\"HelveticaNeue-Light\", \"Helvetica Neue Light\", \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif'; // eslint-disable-line\n            text.style.color = '#FFF';\n            text.style.opacity = '0';\n            text.innerHTML = 'View traces';\n            text.style.transition = '.2s all';\n\n            let close = document.createElement('p');\n            close.style.position = 'absolute';\n            close.style.top = '0';\n            close.style.right = '0';\n            close.style.width = '2em';\n            close.style.borderRadius = '0 3rem 3rem 0';\n            close.style.borderLeft = '1px solid rgba(0,0,0,.15)';\n            close.style.boxShadow = 'inset 1px 0 0 0 rgba(255,255,255,.2)';\n            close.style.lineHeight = '3rem';\n            close.style.color = '#FFF';\n            close.style.opacity = '0';\n            close.style.fontSize = '1.5rem';\n            close.style.textAlign = 'center';\n            close.innerHTML = '×';\n            close.style.transition = '.2s all';\n\n\n            let logo = document.createElement('img');\n            logo.src = 'http://imgur.com/brQx4rK.png';\n            logo.style.width = '2em';\n            logo.style.position = 'absolute';\n            logo.style.top = '.925em';\n            logo.style.left = '.5em';\n\n            container.onmouseenter = function (e) {\n                btn.style.background = 'linear-gradient(to bottom right,#00d6ff,#3b6fcb 90%)';\n                btn.style.opacity = '1';\n                container.style.boxShadow = 'rgb(196, 196, 196) 0px 0px 0px 1px, rgb(184, 184, 184) 0px 4px 30px 0px';\n                container.style.opacity = '1';\n                container.style.width = '12em';\n                text.style.opacity = '.9';\n                close.style.opacity = '.9';\n                text.style.color = 'rgba(255,255,255,.6)';\n                close.style.color = 'rgba(255,255,255,.6)';\n            };\n\n            container.onmouseleave = function (e) {\n                btn.style.boxShadow = '0 0 0 0 transparent';\n                btn.style.opacity = '0';\n                container.style.boxShadow = '0 0 0 1px #c4c4c4, 0 2px 20px 0 #e2e2e2';\n                container.style.width = '3em';\n                text.style.opacity = '0';\n                close.style.opacity = '0';\n            };\n\n            close.onmouseenter = function (e) {\n                close.style.color = 'rgba(255,255,255,.9)';\n                text.style.color = 'rgba(255,255,255,.6)';\n            };\n\n            close.onmouseleave = function (e) {\n                close.style.color = 'rgba(255,255,255,.6)';\n                text.style.color = 'rgba(255,255,255,.9)';\n            };\n\n            close.onclick = function (e) {\n                e.preventDefault();\n                e.stopPropagation();\n                container.style.transform = 'scale(0)';\n                container.style.opacity = '0';\n            };\n\n            container.appendChild(btn);\n            container.appendChild(logo);\n            container.appendChild(text);\n            container.appendChild(close);\n\n            overlay = document.createElement('div');\n            overlay.id = HOST_DIV_ID;\n            link = document.createElement('a');\n            link.href = url;\n            let title = document.createElement('div');\n            title.appendChild(link);\n            overlay.appendChild(title);\n\n            document.body.appendChild(overlay);\n            document.body.appendChild(container);\n\n            // Once all that stuff is done\n            // Note the getComputedStyle() call is necessary to force the DOM\n            // to update the element so the animation looks correct\n            container.style.opacity = '0';\n            window.getComputedStyle(container).opacity; // eslint-disable-line no-unused-expressions\n\n            container.style.transform = 'scale(1)';\n            container.style.opacity = '1';\n        }\n\n\n        for (let i = 0; i < overlay.childNodes.length; i++) {\n            let child = overlay.childNodes[i];\n            if (child.className === 'lightstep_span') {\n                totalLinks++;\n            }\n        }\n        // If we've already added kMaxSpans+1 lines below the\n        // 'header', then don't add anything else.\n        if (totalLinks > kMaxSpans) {\n            return;\n        }\n\n        // Do a primitive trace joining here: only show one link per\n        // trace (i.e. one link per set of spans that will be\n        // combined). We make the (possibly not true) assumptions that\n        // all spans in a trace will arrive in the same event and that\n        // all span share a join id (just to keep things simple).\n        let joinedSpans = [];\n        for (let i = 0; i < spans.length; i++) {\n            joinedSpans.push({\n                summary         : spans[i].span_name,\n                oldest_micros   : spans[i].oldest_micros,\n                youngest_micros : spans[i].youngest_micros,\n                span_guid       : spans[i].span_guid,\n            });\n        }\n        for (let i = 0; i < joinedSpans.length; i++) {\n            for (let j = i + 1; j < joinedSpans.length; j++) {\n                if ((joinedSpans[j].oldest_micros <= joinedSpans[i].youngest_micros &&\n                     joinedSpans[j].youngest_micros >= joinedSpans[i].oldest_micros)) {\n                    if (joinedSpans[j].oldest_micros < joinedSpans[i].oldest_micros) {\n                        joinedSpans[i].summary = `${joinedSpans[j].summary}, ${joinedSpans[i].summary}`;\n                        joinedSpans[i].oldest_micros = joinedSpans[j].oldest_micros;\n                    } else {\n                        joinedSpans[i].summary += `, ${joinedSpans[j].summary}`;\n                    }\n                    if (joinedSpans[j].youngest_micros > joinedSpans[i].youngest_micros) {\n                        joinedSpans[i].youngest_micros = joinedSpans[j].youngest_micros;\n                    }\n                    joinedSpans[j] = joinedSpans[joinedSpans.length - 1];\n                    joinedSpans = joinedSpans.slice(0, joinedSpans.length - 1);\n                    j = i;\n                }\n            }\n        }\n\n        for (let i = 0; i < joinedSpans.length && totalLinks <= kMaxSpans; i++) {\n            totalLinks++;\n        }\n    });\n}\n\n\n// Try with the global Tracer automatically. It will safely do nothing if there's\n// no global tracer and the client can explicitly initialize the overlay.\n//\n// NOTE: this relies directly on the LightStep implementation and not on the\n// OpenTracing APIs\ninitialize(Tracer);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/overlay.js\n **/","module.exports = Tracer;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Tracer\"\n ** module id = 1\n ** module chunks = 0\n **/"],"sourceRoot":""}